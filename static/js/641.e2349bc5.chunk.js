"use strict";(self.webpackChunkreact_kabzda_1=self.webpackChunkreact_kabzda_1||[]).push([[641],{641:(e,s,r)=>{r.r(s),r.d(s,{default:()=>X});var t=r(43);const o="ProfileInfo_descriptionBlock__PfVFs",i="ProfileInfo_avatar__Y6NqF",n="ProfileInfo_info__s8mie",a="ProfileInfo_contact__b3LQP",l="ProfileInfo_inputFileRow__-zD2I",c="ProfileInfo_inputFile__XrMWb",d="ProfileInfo_inputFileList__KW6U-",u="ProfileInfo_form__WlwmF",p="ProfileInfo_label__fbB9w",h="ProfileInfo_input__vcIJ3",f="ProfileInfo_checkbox__qpkHr",m="ProfileInfo_contactsBlock__nRzrO",x="ProfileInfo_contactsTitle__rXQwK",j="ProfileInfo_contactItem__C2sER",_="ProfileInfo_button__5zd40",g="ProfileInfo_inputError__VNI2w",v="ProfileInfo_errorText__b--Jp",P="ProfileInfo_buttonEdite__jd85H",b="ProfileInfo_formSummaryError__+-K3L";var N=r(168),I=r(478),k=r(858),w=r(579);const S=e=>{let{profile:s,onSubmit:r,error:o}=e;const{register:i,handleSubmit:a,reset:l,formState:{errors:c}}=(0,k.mN)({defaultValues:s,mode:"onBlur",criteriaMode:"all"});return(0,t.useEffect)((()=>{l(s)}),[s,l]),(0,w.jsx)("form",{onSubmit:a(((e,s)=>r(e,s,c))),className:u,children:(0,w.jsxs)("div",{className:n,children:[(0,w.jsxs)("label",{className:p,children:[(0,w.jsx)("strong",{children:"Name:"}),(0,w.jsx)("input",{className:`${h} ${c.fullName?g:""}`,...i("fullName",{required:"Name is required"})}),c.fullName&&(0,w.jsx)("p",{className:v,children:c.fullName.message})]}),(0,w.jsxs)("label",{className:p,children:[(0,w.jsx)("strong",{children:"Looking for a job:"}),(0,w.jsx)("input",{className:f,type:"checkbox",...i("lookingForAJob")})]}),(0,w.jsxs)("label",{className:p,children:[(0,w.jsx)("strong",{children:"My professional skills:"}),(0,w.jsx)("input",{className:`${h} ${c.lookingForAJobDescription?g:""}`,...i("lookingForAJobDescription",{required:"This field is required"})}),c.lookingForAJobDescription&&(0,w.jsx)("p",{className:v,children:c.lookingForAJobDescription.message})]}),(0,w.jsxs)("label",{className:p,children:[(0,w.jsx)("strong",{children:"About me:"}),(0,w.jsx)("input",{className:`${h} ${c.aboutMe?g:""}`,...i("aboutMe",{required:"About me is required"})}),c.aboutMe&&(0,w.jsx)("p",{className:v,children:c.aboutMe.message})]}),(0,w.jsxs)("div",{className:m,children:[(0,w.jsx)("b",{className:x,children:"Contacts:"}),s.contacts&&Object.keys(s.contacts).map((e=>{var s,r;return(0,w.jsxs)("div",{className:j,children:[(0,w.jsxs)("strong",{children:[e,":"]}),(0,w.jsx)("input",{className:`${h} ${null!==(s=c.contacts)&&void 0!==s&&s[e]?g:""}`,...i(`contacts.${e}`,{pattern:{value:/^(https?:\/\/)?(www\.)?[\w.-]+\.\w{2,}([\/?#][\w-.~:/?#[\]@!$&'()*+,;=]*)?$/,message:"Enter a valid URL"}})}),(null===(r=c.contacts)||void 0===r?void 0:r[e])&&(0,w.jsx)("p",{className:v,children:c.contacts[e].message})]},e)}))]}),o&&(0,w.jsx)("div",{className:b,children:o}),(0,w.jsx)("button",{type:"submit",className:_,children:"Save"})]})})},D=e=>(0,w.jsxs)("div",{children:[e.isOwner&&(0,w.jsx)("div",{children:(0,w.jsx)("button",{className:P,onClick:e.goToEditeMode,children:"Edite"})}),(0,w.jsxs)("div",{className:n,children:[(0,w.jsxs)("p",{children:[(0,w.jsx)("strong",{children:"Name:"})," ",e.profile.fullName]}),(0,w.jsxs)("p",{children:[(0,w.jsx)("strong",{children:"Looking for a job:"})," ",e.profile.lookingForAJob?"yes":"no"]}),e.profile.lookingForAJob&&(0,w.jsxs)("p",{children:[(0,w.jsx)("strong",{children:"My professional skills:"})," ",e.profile.lookingForAJobDescription]}),(0,w.jsxs)("p",{children:[(0,w.jsx)("strong",{children:"About me:"})," ",e.profile.aboutMe]}),(0,w.jsxs)("p",{children:[(0,w.jsx)("strong",{children:"userID:"})," ",e.profile.userId]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("b",{children:"Contacts"}),": ",Object.keys(e.profile.contacts).map((s=>(0,w.jsx)(T,{contactTitle:s,contactValue:e.profile.contacts[s]},s)))]})]})]}),A=e=>{let[s,r]=(0,t.useState)(!1),[o,i]=(0,t.useState)(e.status);(0,t.useEffect)((()=>{i(e.status)}),[e.status]);return(0,w.jsxs)(w.Fragment,{children:[!s&&(0,w.jsx)("div",{children:(0,w.jsx)("span",{onClick:()=>{r(!0)},children:e.status||"---"})}),s&&(0,w.jsx)("div",{children:(0,w.jsx)("textarea",{onChange:e=>{i(e.currentTarget.value)},value:o,onBlur:()=>{r(!1),e.upDateStatus(o)},autoFocus:!0})})]})},C=e=>{let{error:s,profile:r,isOwner:n,savePhoto:a,saveProfile:u,status:p,upDateStatus:h}=e;const[f,m]=(0,t.useState)(!1);if((0,t.useEffect)((()=>{s||m(!1)}),[s]),!r)return(0,w.jsx)(N.Z,{});return(0,w.jsx)("div",{children:(0,w.jsxs)("div",{className:o,children:[(0,w.jsx)("img",{src:r.photos.large||I,alt:"Avatar",className:i}),(0,w.jsx)("span",{children:"Status:"}),p?(0,w.jsx)(A,{status:p,upDateStatus:h}):(0,w.jsx)("span",{children:"---"}),n&&(0,w.jsx)("form",{method:"post",encType:"multipart/form-data",children:(0,w.jsxs)("div",{className:l,children:[(0,w.jsxs)("label",{className:c,children:[(0,w.jsx)("input",{onChange:e=>{e.target.files.length>0&&a(e.target.files[0])},type:"file",name:"file[]",multiple:!0,accept:"image/*"}),(0,w.jsx)("span",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b"})]}),(0,w.jsx)("div",{className:d})]})}),f?(0,w.jsx)(S,{error:s,profile:r,onSubmit:e=>{u(e).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f:",e)}))}}):(0,w.jsx)(D,{goToEditeMode:()=>m(!0),profile:r,isOwner:n})]})})},T=e=>{let{contactTitle:s,contactValue:r}=e;return(0,w.jsxs)("div",{className:a,children:[(0,w.jsx)("b",{children:s}),": ",r||"\u2014"]})};var y=r(249);const F="MyPosts_postsBlock__bwru2",M="MyPosts_posts__aiUzd",$="Post_item__KRdsC",E=e=>(0,w.jsxs)("div",{className:$,children:[(0,w.jsx)("img",{src:"https://img.freepik.com/premium-photo/flat-icon-design_1258715-207027.jpg?semt=ais_hybrid"}),e.message,(0,w.jsx)("div",{children:(0,w.jsxs)("span",{children:["like ",e.quantityLike]})})]});var q=r(892),J=r(244),L=r(899);const O=t.memo((e=>{let s=[...e.posts].map(((e,s)=>(0,w.jsx)(E,{quantityLike:e.quantityLike,message:e.message},s)));return(0,w.jsxs)("div",{className:F,children:[(0,w.jsx)("div",{children:(0,w.jsx)("h3",{children:"My post"})}),(0,w.jsx)(z,{addPost:e.addPost,newPostText:e.newPostText}),(0,w.jsx)("div",{className:M,children:s})]})})),B=L.Ik().shape({newPostText:L.Yj().min(2,"Too Short!").max(50,"Too Long!").required("Required")}),z=e=>(0,w.jsx)(q.l1,{initialValues:{newPostText:""},validationSchema:B,onSubmit:(s,r)=>{let{resetForm:t}=r;e.addPost(s.newPostText),t()},children:e=>{let{handleChange:s,values:r,errors:t,touched:o}=e;return(0,w.jsxs)(q.lV,{children:[(0,w.jsx)("div",{children:(0,w.jsx)(q.D0,{name:"newPostText",component:J.fs,value:r.newPostText,onChange:s})}),(0,w.jsx)("div",{children:(0,w.jsx)("button",{type:"submit",children:"Add post"})})]})}});var U=r(3);const V=(0,U.Ng)((e=>({posts:e.profilePage.posts,newPostText:e.profilePage.newPostText})),(e=>({addPost:s=>{e((0,y.i5)(s))}})))(O),R=e=>(0,w.jsxs)("div",{children:[(0,w.jsx)(C,{error:e.error,saveProfile:e.saveProfile,savePhoto:e.savePhoto,isOwner:e.isOwner,profile:e.profile,status:e.status,upDateStatus:e.upDateStatus}),(0,w.jsx)(V,{})]});var H=r(216),K=r(863),W=r(923);class Y extends t.Component{refreshProfile(){this.props.getProfile(this.props.userID),this.props.getStatus(this.props.userID)}componentDidMount(){this.refreshProfile()}componentDidUpdate(e,s,r){this.props.userID!==e.userID&&this.refreshProfile()}render(){return this.props.isAuth?(0,w.jsx)("div",{children:(0,w.jsx)(R,{savePhoto:this.props.savePhoto,isOwner:!this.props.userID,...this.props,error:this.props.error,profile:this.props.profile,status:this.props.status,upDateStatus:this.props.upDateStatus})}):(0,w.jsx)(H.C5,{to:"/login"})}}function Q(e){const{userID:s}=(0,H.g)();return(0,w.jsx)(Y,{...e,userID:s})}const X=(0,W.Zz)((0,U.Ng)((e=>({profile:e.profilePage.profile,status:e.profilePage.status,authUserID:e.auth.userID,error:e.profilePage.error})),{setUserProfile:y.p,getProfile:y.E$,getStatus:y.BS,upDateStatus:y.A4,savePhoto:y.Ah,saveProfile:y.Lt}),K.H)((function(e){return(0,w.jsx)(Q,{...e})}))},244:(e,s,r)=>{r.d(s,{MJ:()=>i,fs:()=>n});r(43);var t=r(304),o=r(579);const i=e=>{let{field:s,form:{touched:r,errors:i},component:n="input",...a}=e;const{componentProps:l,...c}=a,d=i[s.name]&&r[s.name];return(0,o.jsxs)("div",{className:`${t.A.formControl} ${d?t.A.error:""}`,children:[(0,o.jsx)("div",{children:(0,o.jsx)(n,{...s,...c,...l})}),d&&(0,o.jsx)("span",{children:i[s.name]})]})},n=e=>{let{field:s,form:{touched:r,errors:i},...n}=e;const a=i[s.name]&&r[s.name];return(0,o.jsxs)("div",{className:`${t.A.formControl} ${a?t.A.error:""}`,children:[(0,o.jsx)("div",{children:(0,o.jsx)("textarea",{...s,...n})}),a&&(0,o.jsx)("span",{children:i[s.name]})]})}},863:(e,s,r)=>{r.d(s,{H:()=>l});var t=r(43),o=r(216),i=r(3),n=r(579);let a=e=>({isAuth:e.auth.isAuth});const l=e=>{class s extends t.Component{render(){return this.props.isAuth?(0,n.jsx)(e,{...this.props}):(0,n.jsx)(o.C5,{to:"/login"})}}return(0,i.Ng)(a)(s)}},304:(e,s,r)=>{r.d(s,{A:()=>t});const t={formControl:"FormsControls_formControl__gMU-B",error:"FormsControls_error__boSMr",formSummaryError:"FormsControls_formSummaryError__1YObT"}},478:(e,s,r)=>{e.exports=r.p+"static/media/user.28369bd2f18e63cc2fb6.jpg"}}]);
//# sourceMappingURL=641.e2349bc5.chunk.js.map