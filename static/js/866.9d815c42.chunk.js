"use strict";(self.webpackChunkreact_kabzda_1=self.webpackChunkreact_kabzda_1||[]).push([[866],{866:(e,s,r)=>{r.r(s),r.d(s,{default:()=>Q});var o=r(43);const t="ProfileInfo_descriptionBlock__PfVFs",i="ProfileInfo_avatar__Y6NqF",n="ProfileInfo_info__s8mie",l="ProfileInfo_contact__b3LQP",a="ProfileInfo_inputFileRow__-zD2I",c="ProfileInfo_inputFile__XrMWb",d="ProfileInfo_inputFileList__KW6U-",p="ProfileInfo_form__WlwmF",u="ProfileInfo_label__fbB9w",f="ProfileInfo_input__vcIJ3",h="ProfileInfo_checkbox__qpkHr",m="ProfileInfo_contactsBlock__nRzrO",x="ProfileInfo_contactsTitle__rXQwK",j="ProfileInfo_contactItem__C2sER",_="ProfileInfo_button__5zd40",g="ProfileInfo_inputError__VNI2w",P="ProfileInfo_errorText__b--Jp",b="ProfileInfo_buttonEdite__jd85H",v="ProfileInfo_formSummaryError__+-K3L";var N=r(168),I=r(478),k=r(858),w=r(579);const A=e=>{let{profile:s,onSubmit:r,error:t}=e;const{register:i,handleSubmit:l,reset:a,formState:{errors:c}}=(0,k.mN)({defaultValues:s,mode:"onBlur",criteriaMode:"all"});return(0,o.useEffect)((()=>{a(s)}),[s,a]),(0,w.jsx)("form",{onSubmit:l(((e,s)=>r(e,s,c))),className:p,children:(0,w.jsxs)("div",{className:n,children:[(0,w.jsxs)("label",{className:u,children:[(0,w.jsx)("strong",{children:"Name:"}),(0,w.jsx)("input",{className:`${f} ${c.fullName?g:""}`,...i("fullName",{required:"Name is required"})}),c.fullName&&(0,w.jsx)("p",{className:P,children:c.fullName.message})]}),(0,w.jsxs)("label",{className:u,children:[(0,w.jsx)("strong",{children:"Looking for a job:"}),(0,w.jsx)("input",{className:h,type:"checkbox",...i("lookingForAJob")})]}),(0,w.jsxs)("label",{className:u,children:[(0,w.jsx)("strong",{children:"My professional skills:"}),(0,w.jsx)("input",{className:`${f} ${c.lookingForAJobDescription?g:""}`,...i("lookingForAJobDescription",{required:"This field is required"})}),c.lookingForAJobDescription&&(0,w.jsx)("p",{className:P,children:c.lookingForAJobDescription.message})]}),(0,w.jsxs)("label",{className:u,children:[(0,w.jsx)("strong",{children:"About me:"}),(0,w.jsx)("input",{className:`${f} ${c.aboutMe?g:""}`,...i("aboutMe",{required:"About me is required"})}),c.aboutMe&&(0,w.jsx)("p",{className:P,children:c.aboutMe.message})]}),(0,w.jsxs)("div",{className:m,children:[(0,w.jsx)("b",{className:x,children:"Contacts:"}),s.contacts&&Object.keys(s.contacts).map((e=>{var s,r;return(0,w.jsxs)("div",{className:j,children:[(0,w.jsxs)("strong",{children:[e,":"]}),(0,w.jsx)("input",{className:`${f} ${null!==(s=c.contacts)&&void 0!==s&&s[e]?g:""}`,...i(`contacts.${e}`,{pattern:{value:/^(https?:\/\/)?(www\.)?[\w.-]+\.\w{2,}([\/?#][\w-.~:/?#[\]@!$&'()*+,;=]*)?$/,message:"Enter a valid URL"}})}),(null===(r=c.contacts)||void 0===r?void 0:r[e])&&(0,w.jsx)("p",{className:P,children:c.contacts[e].message})]},e)}))]}),t&&(0,w.jsx)("div",{className:v,children:t}),(0,w.jsx)("button",{type:"submit",className:_,children:"Save"})]})})},D=e=>(0,w.jsxs)("div",{children:[e.isOwner&&(0,w.jsx)("div",{children:(0,w.jsx)("button",{className:b,onClick:e.goToEditeMode,children:"Edite"})}),(0,w.jsxs)("div",{className:n,children:[(0,w.jsxs)("p",{children:[(0,w.jsx)("strong",{children:"Name:"})," ",e.profile.fullName]}),(0,w.jsxs)("p",{children:[(0,w.jsx)("strong",{children:"Looking for a job:"})," ",e.profile.lookingForAJob?"yes":"no"]}),e.profile.lookingForAJob&&(0,w.jsxs)("p",{children:[(0,w.jsx)("strong",{children:"My professional skills:"})," ",e.profile.lookingForAJobDescription]}),(0,w.jsxs)("p",{children:[(0,w.jsx)("strong",{children:"About me:"})," ",e.profile.aboutMe]}),(0,w.jsxs)("p",{children:[(0,w.jsx)("strong",{children:"userID:"})," ",e.profile.userId]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("b",{children:"Contacts"}),": ",Object.keys(e.profile.contacts).map((s=>(0,w.jsx)(C,{contactTitle:s,contactValue:e.profile.contacts[s]},s)))]})]})]}),S=e=>{let{error:s,profile:r,isOwner:n,savePhoto:l,saveProfile:p}=e;const[u,f]=(0,o.useState)(!1);if((0,o.useEffect)((()=>{s||f(!1)}),[s]),!r)return(0,w.jsx)(N.Z,{});return(0,w.jsx)("div",{children:(0,w.jsxs)("div",{className:t,children:[(0,w.jsx)("img",{src:r.photos.large||I,alt:"Avatar",className:i}),n&&(0,w.jsx)("form",{method:"post",encType:"multipart/form-data",children:(0,w.jsxs)("div",{className:a,children:[(0,w.jsxs)("label",{className:c,children:[(0,w.jsx)("input",{onChange:e=>{e.target.files.length>0&&l(e.target.files[0])},type:"file",name:"file[]",multiple:!0,accept:"image/*"}),(0,w.jsx)("span",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b"})]}),(0,w.jsx)("div",{className:d})]})}),u?(0,w.jsx)(A,{error:s,profile:r,onSubmit:e=>{p(e).catch((e=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f:",e)}))}}):(0,w.jsx)(D,{goToEditeMode:()=>f(!0),profile:r,isOwner:n})]})})},C=e=>{let{contactTitle:s,contactValue:r}=e;return(0,w.jsxs)("div",{className:l,children:[(0,w.jsx)("b",{children:s}),": ",r||"\u2014"]})};var y=r(249);const T="MyPosts_postsBlock__bwru2",F="MyPosts_posts__aiUzd",M="Post_item__KRdsC",$=e=>(0,w.jsxs)("div",{className:M,children:[(0,w.jsx)("img",{src:"https://img.freepik.com/premium-photo/flat-icon-design_1258715-207027.jpg?semt=ais_hybrid"}),e.message,(0,w.jsx)("div",{children:(0,w.jsxs)("span",{children:["like ",e.quantityLike]})})]});var q=r(892),E=r(244),J=r(899);const L=o.memo((e=>{let s=[...e.posts].map(((e,s)=>(0,w.jsx)($,{quantityLike:e.quantityLike,message:e.message},s)));return(0,w.jsxs)("div",{className:T,children:[(0,w.jsx)("div",{children:(0,w.jsx)("h3",{children:"My post"})}),(0,w.jsx)(z,{addPost:e.addPost,newPostText:e.newPostText}),(0,w.jsx)("div",{className:F,children:s})]})})),O=J.Ik().shape({newPostText:J.Yj().min(2,"Too Short!").max(50,"Too Long!").required("Required")}),z=e=>(0,w.jsx)(q.l1,{initialValues:{newPostText:""},validationSchema:O,onSubmit:(s,r)=>{let{resetForm:o}=r;e.addPost(s.newPostText),o()},children:e=>{let{handleChange:s,values:r,errors:o,touched:t}=e;return(0,w.jsxs)(q.lV,{children:[(0,w.jsx)("div",{children:(0,w.jsx)(q.D0,{name:"newPostText",component:E.fs,value:r.newPostText,onChange:s})}),(0,w.jsx)("div",{children:(0,w.jsx)("button",{type:"submit",children:"Add post"})})]})}});var B=r(3);const U=(0,B.Ng)((e=>({posts:e.profilePage.posts,newPostText:e.profilePage.newPostText})),(e=>({addPost:s=>{e((0,y.i5)(s))}})))(L),V=e=>(0,w.jsxs)("div",{children:[(0,w.jsx)(S,{error:e.error,saveProfile:e.saveProfile,savePhoto:e.savePhoto,isOwner:e.isOwner,profile:e.profile,status:e.status,upDateStatus:e.upDateStatus}),(0,w.jsx)(U,{})]});var R=r(216),H=r(863),K=r(923);class W extends o.Component{refreshProfile(){this.props.getProfile(this.props.userID),this.props.getStatus(this.props.userID)}componentDidMount(){this.refreshProfile()}componentDidUpdate(e,s,r){this.props.userID!==e.userID&&this.refreshProfile()}render(){return this.props.isAuth?(0,w.jsx)("div",{children:(0,w.jsx)(V,{savePhoto:this.props.savePhoto,isOwner:!this.props.userID,...this.props,error:this.props.error,profile:this.props.profile,status:this.props.status,upDateStatus:this.props.upDateStatus})}):(0,w.jsx)(R.C5,{to:"/login"})}}function Y(e){const{userID:s}=(0,R.g)();return(0,w.jsx)(W,{...e,userID:s})}const Q=(0,K.Zz)((0,B.Ng)((e=>({profile:e.profilePage.profile,status:e.profilePage.status,authUserID:e.auth.userID,error:e.profilePage.error})),{setUserProfile:y.p,getProfile:y.E$,getStatus:y.BS,upDateStatus:y.A4,savePhoto:y.Ah,saveProfile:y.Lt}),H.H)((function(e){return(0,w.jsx)(Y,{...e})}))},244:(e,s,r)=>{r.d(s,{MJ:()=>i,fs:()=>n});r(43);var o=r(304),t=r(579);const i=e=>{let{field:s,form:{touched:r,errors:i},component:n="input",...l}=e;const{componentProps:a,...c}=l,d=i[s.name]&&r[s.name];return(0,t.jsxs)("div",{className:`${o.A.formControl} ${d?o.A.error:""}`,children:[(0,t.jsx)("div",{children:(0,t.jsx)(n,{...s,...c,...a})}),d&&(0,t.jsx)("span",{children:i[s.name]})]})},n=e=>{let{field:s,form:{touched:r,errors:i},...n}=e;const l=i[s.name]&&r[s.name];return(0,t.jsxs)("div",{className:`${o.A.formControl} ${l?o.A.error:""}`,children:[(0,t.jsx)("div",{children:(0,t.jsx)("textarea",{...s,...n})}),l&&(0,t.jsx)("span",{children:i[s.name]})]})}},863:(e,s,r)=>{r.d(s,{H:()=>a});var o=r(43),t=r(216),i=r(3),n=r(579);let l=e=>({isAuth:e.auth.isAuth});const a=e=>{class s extends o.Component{render(){return this.props.isAuth?(0,n.jsx)(e,{...this.props}):(0,n.jsx)(t.C5,{to:"/login"})}}return(0,i.Ng)(l)(s)}},304:(e,s,r)=>{r.d(s,{A:()=>o});const o={formControl:"FormsControls_formControl__gMU-B",error:"FormsControls_error__boSMr",formSummaryError:"FormsControls_formSummaryError__1YObT"}},478:(e,s,r)=>{e.exports=r.p+"static/media/user.28369bd2f18e63cc2fb6.jpg"}}]);
//# sourceMappingURL=866.9d815c42.chunk.js.map