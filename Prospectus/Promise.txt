# üîπ –ß—Ç–æ —Ç–∞–∫–æ–µ `Promise` –≤ JavaScript?

**`Promise` (–ü—Ä–æ–º–∏—Å)** ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –≤ JavaScript, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏**. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç **–ø–æ–¥–æ–∂–¥–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞) –∏ –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω—É–∂–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è.  

–†–∞–Ω—å—à–µ –≤ JavaScript –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ **–∫–æ–ª–±—ç–∫–∏** (callback-—Ñ—É–Ω–∫—Ü–∏–∏), –Ω–æ —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –ø—Ä–æ–±–ª–µ–º–µ **"–∞–¥—Å–∫–æ–π –ø–∏—Ä–∞–º–∏–¥—ã –∫–æ–ª–±—ç–∫–æ–≤"** (callback hell). `Promise` –¥–µ–ª–∞–µ—Ç –∫–æ–¥ **—á–∏—â–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ**.

---

## üîπ –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è `Promise`

`Promise` –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ **—Ç—Ä—ë—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö**:

1. üïì **pending** (–æ–∂–∏–¥–∞–Ω–∏–µ) ‚Äî –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –æ–ø–µ—Ä–∞—Ü–∏—è –µ—â—ë –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.
2. ‚úÖ **fulfilled** (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ) ‚Äî –æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ.
3. ‚ùå **rejected** (–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ) ‚Äî –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞.

–ü—Ä–∏–º–µ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏–π:

```js
let promise = new Promise((resolve, reject) => {
  setTimeout(() => resolve("‚úÖ –£—Å–ø–µ—Ö!"), 2000);
});

console.log(promise); // –°–Ω–∞—á–∞–ª–∞ –±—É–¥–µ—Ç "pending"
setTimeout(() => console.log(promise), 2500); // –ß–µ—Ä–µ–∑ 2.5 —Å–µ–∫. –±—É–¥–µ—Ç "fulfilled"
```

üí° –ó–¥–µ—Å—å:
- –°–Ω–∞—á–∞–ª–∞ `promise` –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ **pending**.
- –ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `resolve()`, –∏ `promise` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è **fulfilled**.

---

## üîπ –°–æ–∑–¥–∞–Ω–∏–µ `Promise`

```js
let promise = new Promise((resolve, reject) => {
  // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö)
  setTimeout(() => {
    let success = true; // –ú–µ–Ω—è–µ–º –Ω–∞ false, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –æ—à–∏–±–∫—É
    if (success) {
      resolve("‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!");
    } else {
      reject("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö!");
    }
  }, 2000);
});
```

üí° –ó–¥–µ—Å—å:
- `resolve("‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!")` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –µ—Å–ª–∏ –≤—Å—ë —Ö–æ—Ä–æ—à–æ.
- `reject("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö!")` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞.

---

## üîπ –û–±—Ä–∞–±–æ—Ç–∫–∞ `Promise` —Å `then()` –∏ `catch()`

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è `Promise` –º—ã –º–æ–∂–µ–º –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –ø–æ–º–æ—â—å—é `.then()` –∏ `.catch()`.

```js
promise
  .then((result) => {
    console.log(result); // –í—ã–≤–µ–¥–µ—Ç "‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!" —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
  })
  .catch((error) => {
    console.log(error); // –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –≤—ã–≤–µ–¥–µ—Ç "‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö!"
  });
```

üí° **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**
1. –ï—Å–ª–∏ `Promise` —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω (`resolve()`), —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **`.then(result => {...})`**.
2. –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ (`reject()`), —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **`.catch(error => {...})`**.

---

## üîπ `finally()` ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ

`.finally()` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–≤—Å–µ–≥–¥–∞**, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, —É—Å–ø–µ—à–Ω–æ –ª–∏ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è `Promise` –∏–ª–∏ –±—ã–ª–∞ –æ—à–∏–±–∫–∞.

```js
promise
  .then((result) => console.log(result))
  .catch((error) => console.log(error))
  .finally(() => console.log("‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ!"));
```

üí° **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `finally()`?**
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ **—Å–∫—Ä—ã—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏** –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞.
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ **–æ—Å–≤–æ–±–æ–¥–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã** –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

---

## üîπ –ü—Ä–∏–º–µ—Ä —Å `fetch()`

–ò—Å–ø–æ–ª—å–∑—É–µ–º `Promise` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞:

```js
fetch("https://jsonplaceholder.typicode.com/users/1")
  .then((response) => response.json()) // –ü–∞—Ä—Å–∏–º JSON
  .then((user) => console.log("üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:", user))
  .catch((error) => console.log("–û—à–∏–±–∫–∞:", error))
  .finally(() => console.log("–ó–∞–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à—ë–Ω"));
```

üí° **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**
1. `fetch()` –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Promise`.
2. `.then(response => response.json())` ‚Äî –∂–¥—ë—Ç, –ø–æ–∫–∞ –æ—Ç–≤–µ—Ç –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—Å—è –≤ JSON.
3. `.then(user => console.log(user))` ‚Äî –≤—ã–≤–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
4. `.catch(error => console.log(error))` ‚Äî –ª–æ–≤–∏—Ç –æ—à–∏–±–∫—É.
5. `.finally(() => console.log("–ó–∞–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à—ë–Ω"))` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞.

---

## üîπ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `Promise`

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å **–Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ –ø–æ—Ä—è–¥–∫—É**, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ü–µ–ø–æ—á–∫—É `.then()`**.

```js
function firstTask() {
  return new Promise((resolve) => {
    setTimeout(() => resolve("üîπ –ü–µ—Ä–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ"), 1000);
  });
}

function secondTask() {
  return new Promise((resolve) => {
    setTimeout(() => resolve("üîπ –í—Ç–æ—Ä–æ–µ –∑–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ"), 2000);
  });
}

firstTask()
  .then((result) => {
    console.log(result);
    return secondTask(); // –ü–µ—Ä–µ–¥–∞—ë–º —Å–ª–µ–¥—É—é—â–∏–π Promise
  })
  .then((result) => console.log(result))
  .catch((error) => console.log("–û—à–∏–±–∫–∞:", error));
```

üí° –ó–¥–µ—Å—å:
- `firstTask()` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–≤–æ–π (1 —Å–µ–∫).
- –ó–∞—Ç–µ–º `secondTask()` (2 —Å–µ–∫).
- –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –æ—à–∏–±–∫–∞, –æ–Ω–∞ –ø–æ–ø–∞–¥—ë—Ç –≤ `catch()`.

---

## üîπ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `Promise`

–ï—Å–ª–∏ –∑–∞–¥–∞—á–∏ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞, –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏—Ö **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ** —Å `Promise.all()`.

```js
let task1 = new Promise((resolve) => setTimeout(() => resolve("‚úÖ –ó–∞–¥–∞—á–∞ 1"), 2000));
let task2 = new Promise((resolve) => setTimeout(() => resolve("‚úÖ –ó–∞–¥–∞—á–∞ 2"), 1000));

Promise.all([task1, task2]).then((results) => console.log("–í—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:", results));
```

üí° **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**
- –ó–∞–ø—É—Å–∫–∞–µ—Ç **–æ–±–∞ –ø—Ä–æ–º–∏—Å–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**.
- –ñ–¥—ë—Ç, –ø–æ–∫–∞ –≤—Å–µ –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è.
- –ï—Å–ª–∏ –æ–¥–∏–Ω **—É–ø–∞–¥—ë—Ç —Å –æ—à–∏–±–∫–æ–π**, –≤—Å—è `Promise.all()` —Ç–æ–∂–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π.

‚ö° –ï—Å–ª–∏ –Ω—É–∂–Ω–æ **–ø–æ–ª—É—á–∏—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —É—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**, –∏—Å–ø–æ–ª—å–∑—É–µ–º `Promise.race()`:

```js
Promise.race([task1, task2]).then((result) => console.log("–ü–µ—Ä–≤—ã–π –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π:", result));
```

–ó–¥–µ—Å—å –≤—ã–≤–µ–¥–µ—Ç—Å—è **—Ç–æ—Ç –ø—Ä–æ–º–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø–µ—Ä–≤—ã–º**.

---

## üîπ –ò—Ç–æ–≥: —á—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –ø—Ä–æ `Promise`?

‚úÖ `Promise` –Ω—É–∂–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏**.  
‚úÖ –û–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ **pending**, **fulfilled** –∏–ª–∏ **rejected**.  
‚úÖ `resolve(value)` ‚Äî —É—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, `reject(error)` ‚Äî –æ—à–∏–±–∫–∞.  
‚úÖ `.then()` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏.  
‚úÖ `.catch()` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞.  
‚úÖ `.finally()` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–≤—Å–µ–≥–¥–∞**, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.  
‚úÖ `Promise.all()` ‚Äî –∂–¥—ë—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–æ–º–∏—Å–æ–≤.  
‚úÖ `Promise.race()` ‚Äî –∂–¥—ë—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è **–ø–µ—Ä–≤–æ–≥–æ** –ø—Ä–æ–º–∏—Å–∞.  

–¢–µ–ø–µ—Ä—å —Ç—ã –∑–Ω–∞–µ—à—å, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç `Promise`! üöÄ üòä